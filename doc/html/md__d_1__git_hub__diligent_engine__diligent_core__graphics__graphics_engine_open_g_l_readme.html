<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Diligent Engine API Reference: GraphicsEngineOpenGL</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Diligent Engine API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GraphicsEngineOpenGL </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Implementation of <a class="el" href="namespace_diligent.html" title="Namespace for the OpenGL implementation of the graphics engine. ">Diligent</a> Engine API using OpenGL/GLES</p>
<h1>Initialization</h1>
<p>The following code snippet shows how to initialize diligent engine in OpenGL/GLES mode.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;RenderDeviceFactoryOpenGL.h&quot;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_diligent.html">Diligent</a>;</div><div class="line"></div><div class="line"><span class="comment">// ... </span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef ENGINE_DLL</span></div><div class="line">    GetEngineFactoryOpenGLType GetEngineFactoryOpenGL;</div><div class="line">    <span class="keywordflow">if</span>( !<a class="code" href="namespace_diligent.html#a4102302b39db6902d51501d66e2fcfe6">LoadGraphicsEngineOpenGL</a>(GetEngineFactoryOpenGL) )</div><div class="line">        <span class="keywordflow">return</span> FALSE;</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><a class="code" href="class_diligent_1_1_ref_cnt_auto_ptr.html">RefCntAutoPtr&lt;IRenderDevice&gt;</a> pRenderDevice;</div><div class="line"><a class="code" href="class_diligent_1_1_ref_cnt_auto_ptr.html">RefCntAutoPtr&lt;IDeviceContext&gt;</a> pImmediateContext;</div><div class="line"><a class="code" href="struct_diligent_1_1_swap_chain_desc.html">SwapChainDesc</a> <a class="code" href="struct_diligent_1_1_swap_chain_desc.html">SwapChainDesc</a>;</div><div class="line"><a class="code" href="class_diligent_1_1_ref_cnt_auto_ptr.html">RefCntAutoPtr&lt;ISwapChain&gt;</a> pSwapChain;</div><div class="line">GetEngineFactoryOpenGL()-&gt;CreateDeviceAndSwapChainGL(</div><div class="line">    <a class="code" href="struct_diligent_1_1_engine_creation_attribs.html">EngineCreationAttribs</a>(), &amp;pRenderDevice, &amp;pImmediateContext, <a class="code" href="struct_diligent_1_1_swap_chain_desc.html">SwapChainDesc</a>, hWnd, &amp;pSwapChain );</div></div><!-- fragment --><p>Alternatively, the engine can be initialized by attaching to existing OpenGL context (see <a href="#initializing-the-engine-by-attaching-to-existing-gl-context">below</a>).</p>
<h1>Interoperability with OpenGL/GLES</h1>
<p><a class="el" href="namespace_diligent.html" title="Namespace for the OpenGL implementation of the graphics engine. ">Diligent</a> Engine exposes methods to access internal OpenGL/GLES objects, is able to create diligent engine buffers and textures from existing GL buffer and texture handles, and can be initialized by attaching to existing GL context.</p>
<h2>Accessing Native GL objects</h2>
<p>Below are some of the methods that provide access to internal D3D11 objects:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GLuint IBufferGL::GetGLBufferHandle()</code>  </td><td class="markdownTableBodyNone">returns GL buffer handle   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>bool IDeviceContextGL::UpdateCurrentGLContext()</code>  </td><td class="markdownTableBodyNone">attaches to the active GL context in the thread. Returns false if there is no active context, and true otherwise. If an application uses multiple GL contexts, this method must be called before any other command to let the engine update the active context.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GLuint ITextureGL::GetGLTextureHandle()</code>  </td><td class="markdownTableBodyNone">returns GL texture handle   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GLenum ITextureGL::GetBindTarget()</code>  </td><td class="markdownTableBodyNone">returns GL texture bind target   </td></tr>
</table>
<h2>Creating <a class="el" href="namespace_diligent.html" title="Namespace for the OpenGL implementation of the graphics engine. ">Diligent</a> Engine Objects from OpenGL Handles</h2>
<ul>
<li><code>void IRenderDeviceGL::CreateTextureFromGLHandle(Uint32 GLHandle, const TextureDesc &amp;TexDesc, ITexture **ppTexture)</code> - creates a diligent engine texture from OpenGL handle. The method takes OpenGL handle GLHandle, texture description TexDesc, and writes the pointer to the created texture object at the memory address pointed to by ppTexture. The engine can automatically set texture width, height, depth, mip levels count, and format, but the remaining field of TexDesc structure must be populated by the application. Note that diligent engine texture object does not take ownership of the GL resource, and the application must not destroy it while it is in use by the engine.</li>
<li><code>void IRenderDeviceGL::CreateBufferFromGLHandle(Uint32 GLHandle, const BufferDesc &amp;BuffDesc, IBuffer **ppBuffer)</code> - creates a diligent engine buffer from OpenGL handle. The method takes OpenGL handle GLHandle, buffer description BuffDesc, and writes the pointer to the created buffer object at the memory address pointed to by ppBuffer. The engine can automatically set the buffer size, but the rest of the fields need to be set by the client. Note that diligent engine buffer object does not take ownership of the GL resource, and the application must not destroy it while it is in use by the engine.</li>
</ul>
<h2>Initializing the Engine by Attaching to Existing GL Context</h2>
<p>The code snippet below shows how diligent engine can be attached to existing GL context</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> *pFactoryGL = GetEngineFactoryOpenGL();</div><div class="line">EngineCreationAttribs Attribs;</div><div class="line">pFactoryGL-&gt;AttachToActiveGLContext(Attribs, &amp;m_Device, &amp;m_Context);</div></div><!-- fragment --><p>For more information about interoperability with OpenGL, please visit <a href="http://diligentgraphics.com/diligent-engine/native-api-interoperability/openglgles-interoperability/">Diligent Engine web site</a></p>
<h1>References</h1>
<p><a href="http://diligentgraphics.com/diligent-engine">Diligent Engine</a></p>
<p><a href="http://diligentgraphics.com/diligent-engine/native-api-interoperability/openglgles-interoperability/">Interoperability with OpenGL/GLES</a></p>
<h1>Release Notes</h1>
<h2>2.1</h2>
<h3>New features</h3>
<ul>
<li>Interoperability with OpenGL/GLES<ul>
<li>Accessing GL handles of internal texture/buffer objects</li>
<li>Createing diligent engine buffers/textures from OpenGL handles</li>
<li>Attaching to existing OpenGL context</li>
</ul>
</li>
<li>Integraion with Unity</li>
<li>Geometry shader support</li>
<li>Tessellation support</li>
<li>Support ofr multiple GL contexts: VAO, FBO &amp; Program Pipelines are created and cached for multiple native contexts. <code>IDeviceContextGL::UpdateCurrentGLContext()</code> sets the active GL context in the thread</li>
</ul>
<h3>API Changes</h3>
<ul>
<li>Updated map interface: removed MAP_WRITE_DISCARD and MAP_WRITE_NO_OVERWRITE map types and added MAP_FLAG_DISCARD and MAP_FLAG_DO_NOT_SYNCHRONIZE flags instead</li>
</ul>
<h2>2.0</h2>
<p>Reworked the API to follow D3D12 style</p>
<h2>1.0</h2>
<p>Initial release</p>
<p><b>Copyright 2015-2017 Egor Yusov</b></p>
<p><a href="http://diligentgraphics.com">Diligent Graphics</a> </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<!--
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 3 2018 20:17:25 for Diligent Engine API Reference by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
-->
</body>
</html>
