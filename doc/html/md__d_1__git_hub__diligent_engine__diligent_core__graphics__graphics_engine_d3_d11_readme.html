<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Diligent Engine API Reference: GraphicsEngineD3D11</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Diligent Engine API Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GraphicsEngineD3D11 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Implementation of <a class="el" href="namespace_diligent.html" title="Namespace for the OpenGL implementation of the graphics engine. ">Diligent</a> Engine API using Direct3D11</p>
<h1>Initialization</h1>
<p>The following code snippet shows how to initialize diligent engine in D3D11 mode.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;RenderDeviceFactoryD3D11.h&quot;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespace_diligent.html">Diligent</a>;</div><div class="line"></div><div class="line"><span class="comment">// ... </span></div><div class="line"></div><div class="line"><a class="code" href="struct_diligent_1_1_engine_d3_d11_attribs.html">EngineD3D11Attribs</a> DeviceAttribs;</div><div class="line">DeviceAttribs.<a class="code" href="struct_diligent_1_1_engine_d3_d11_attribs.html#ae45ccd8517116ee19b002f85e80bf1b4">DebugFlags</a> = </div><div class="line">    (Uint32)<a class="code" href="namespace_diligent.html#a5c8758ce3fd35ebeff55489fba521a85ab7d453859af84f92bcc33549827f05d9">EngineD3D11DebugFlags::VerifyCommittedShaderResources</a> |</div><div class="line">    (Uint32)<a class="code" href="namespace_diligent.html#a5c8758ce3fd35ebeff55489fba521a85a34263dc9e0364b5d7788048e0f993602">EngineD3D11DebugFlags::VerifyCommittedResourceRelevance</a>;</div><div class="line"></div><div class="line"><span class="comment">// Get pointer to the function that returns the factory</span></div><div class="line"><span class="preprocessor">#ifdef ENGINE_DLL</span></div><div class="line">    GetEngineFactoryD3D11Type GetEngineFactoryD3D11 = <span class="keyword">nullptr</span>;</div><div class="line">    <span class="comment">// Load the dll and import GetEngineFactoryD3D11() function</span></div><div class="line">    <a class="code" href="namespace_diligent.html#adfb2dafb678f595c8c1300cf53d14a15">LoadGraphicsEngineD3D11</a>(GetEngineFactoryD3D11);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="keyword">auto</span> *pFactoryD3D11 = GetEngineFactoryD3D11();</div><div class="line"></div><div class="line"><a class="code" href="class_diligent_1_1_ref_cnt_auto_ptr.html">RefCntAutoPtr&lt;IRenderDevice&gt;</a> pRenderDevice;</div><div class="line"><a class="code" href="class_diligent_1_1_ref_cnt_auto_ptr.html">RefCntAutoPtr&lt;IDeviceContext&gt;</a> pImmediateContext;</div><div class="line"><a class="code" href="struct_diligent_1_1_swap_chain_desc.html">SwapChainDesc</a> <a class="code" href="struct_diligent_1_1_swap_chain_desc.html">SwapChainDesc</a>;</div><div class="line"><a class="code" href="class_diligent_1_1_ref_cnt_auto_ptr.html">RefCntAutoPtr&lt;ISwapChain&gt;</a> pSwapChain;</div><div class="line">pFactoryD3D11-&gt;CreateDeviceAndContextsD3D11( DeviceAttribs, &amp;pRenderDevice, &amp;pImmediateContext, 0 );</div><div class="line">pFactoryD3D11-&gt;CreateSwapChainD3D11( pRenderDevice, pImmediateContext, <a class="code" href="struct_diligent_1_1_swap_chain_desc.html">SwapChainDesc</a>, hWnd, &amp;pSwapChain );</div></div><!-- fragment --><p>Alternatively, the engine can be initialized by attaching to existing D3D11 device and immediate context (see below).</p>
<h1>Interoperability with Direct3D11</h1>
<p><a class="el" href="namespace_diligent.html" title="Namespace for the OpenGL implementation of the graphics engine. ">Diligent</a> Engine exposes methods to access internal D3D11 objects, is able to create diligent engine buffers and textures from existing Direct3D11 buffers and textures, and can be initialized by attaching to existing D3D11 device and immediate context.</p>
<h2>Accessing Native D3D11 objects</h2>
<p>Below are some of the methods that provide access to internal D3D11 objects:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ID3D11Buffer *IBufferD3D11::GetD3D11Buffer()</code>  </td><td class="markdownTableBodyNone">returns a pointer to the ID3D11Buffer interface of the internal Direct3D11 buffer object   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ID3D11Resource* ITextureD3D11::GetD3D11Texture()</code>  </td><td class="markdownTableBodyNone">returns a pointer to the ID3D11Resource interface of the internal Direct3D11 texture object   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ID3D11View* IBufferViewD3D11()::GetD3D11View()</code>  </td><td class="markdownTableBodyNone">returns a pointer to the ID3D11View interface of the internal d3d11 object representing the buffer view   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ID3D11View* ITextureViewD3D11::GetD3D11View()</code>  </td><td class="markdownTableBodyNone">returns a pointer to the ID3D11View interface of the internal d3d11 object representing the texture view   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ID3D11Device* IRenderDeviceD3D11::GetD3D11Device()</code>  </td><td class="markdownTableBodyNone">returns a pointer to the native D3D11 device object   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ID3D11DeviceContext* IDeviceContextD3D11::GetD3D11DeviceContext()</code>  </td><td class="markdownTableBodyNone">returns a pointer to the native ID3D11DeviceContext object   </td></tr>
</table>
<h2>Creating <a class="el" href="namespace_diligent.html" title="Namespace for the OpenGL implementation of the graphics engine. ">Diligent</a> Engine Objects from D3D11 Resources</h2>
<ul>
<li><code>void IRenderDeviceD3D11::CreateBufferFromD3DResource(ID3D11Buffer *pd3d11Buffer, const BufferDesc&amp; BuffDesc, IBuffer **ppBuffer)</code> - creates a diligent engine buffer object from the native d3d11 buffer</li>
<li><code>void IRenderDeviceD3D11::CreateTextureFromD3DResource(ID3D11Texture1D *pd3d11Texture, ITexture **ppTexture)</code> - create a diligent engine texture object from the native D3D11 1D texture</li>
<li><code>void IRenderDeviceD3D11::CreateTextureFromD3DResource(ID3D11Texture2D *pd3d11Texture, ITexture **ppTexture)</code> - create a diligent engine texture object from the native D3D11 2D texture</li>
<li><code>void IRenderDeviceD3D11::CreateTextureFromD3DResource(ID3D11Texture3D *pd3d11Texture, ITexture **ppTexture)</code> - create a diligent engine texture object from the native D3D11 3D texture</li>
</ul>
<h2>Initializing the Engine by Attaching to Existing D3D11 Device and Immediate Context</h2>
<p>The code snippet below shows how diligent engine can be attached to D3D11 device returned by Unity</p>
<div class="fragment"><div class="line">IUnityGraphicsD3D11* d3d = interfaces-&gt;Get&lt;IUnityGraphicsD3D11&gt;();</div><div class="line">ID3D11Device* d3d11NativeDevice = d3d-&gt;GetDevice();</div><div class="line">CComPtr&lt;ID3D11DeviceContext&gt; d3d11ImmediateContext;</div><div class="line">d3d11NativeDevice-&gt;GetImmediateContext(&amp;d3d11ImmediateContext);</div><div class="line"><span class="keyword">auto</span> *pFactoryD3d11 = GetEngineFactoryD3D11();</div><div class="line">EngineD3D11Attribs Attribs;</div><div class="line">pFactoryD3d11-&gt;AttachToD3D11Device(d3d11NativeDevice, d3d11ImmediateContext, Attribs, &amp;m_Device, &amp;m_Context, 0);</div></div><!-- fragment --><p>For more information about interoperability with D3D11, please visit <a href="http://diligentgraphics.com/diligent-engine/native-api-interoperability/direct3d11-interoperability/">Diligent Engine web site</a></p>
<h1>References</h1>
<p><a href="http://diligentgraphics.com/diligent-engine">Diligent Engine on the Web</a></p>
<p><a href="http://diligentgraphics.com/diligent-engine/native-api-interoperability/direct3d11-interoperability/">Interoperability with Direct3D11</a></p>
<p><a href="http://diligentgraphics.com/diligent-engine/architecture/d3d11">Architecture of D3D11-based implementation</a></p>
<h1>Release Notes</h1>
<h2>2.1</h2>
<h3>New features</h3>
<ul>
<li>Interoperability with Direct3D11<ul>
<li>Accessing internal D3D11 objects and handles</li>
<li>Createing diligent engine buffers/textures from D3D11 resources</li>
<li>Attaching to existing D3D11 device</li>
</ul>
</li>
<li>Integraion with Unity</li>
<li>Geometry shader support</li>
<li>Tessellation support</li>
<li>Support for structured buffers in HSLS shaders</li>
</ul>
<h3>API Changes</h3>
<ul>
<li>Updated map interface: removed MAP_WRITE_DISCARD and MAP_WRITE_NO_OVERWRITE map types and added MAP_FLAG_DISCARD and MAP_FLAG_DO_NOT_SYNCHRONIZE flags instead</li>
</ul>
<h3>Bug fixes</h3>
<ul>
<li>Fixed issue with unaligned uniform buffers</li>
</ul>
<h2>2.0</h2>
<p>Reworked the API to follow D3D12 style</p>
<h2>1.0</h2>
<p>Initial release</p>
<p><b>Copyright 2015-2018 Egor Yusov</b></p>
<p><a href="http://diligentgraphics.com">diligentgraphics.com</a> </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<!--
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 3 2018 22:00:28 for Diligent Engine API Reference by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
-->
</body>
</html>
